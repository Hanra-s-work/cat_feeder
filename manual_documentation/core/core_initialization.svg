<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="737px" preserveAspectRatio="none" style="width:1036px;height:737px;background:#FFFFFF;" version="1.1" viewBox="0 0 1036 737" width="1036px" zoomAndPan="magnify"><defs/><g><g><title>RuntimeManager</title><rect fill="#FFFFFF" height="551.0625" style="stroke:#000000;stroke-width:1;" width="10" x="291.3452" y="98.4297"/></g><g><title>Service Class</title><rect fill="#FFFFFF" height="129.5313" style="stroke:#000000;stroke-width:1;" width="10" x="475.3022" y="346.2969"/></g><g><title>Service Class</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="475.3022" y="504.9609"/></g><g><title>FinalSingleton</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#000000;stroke-width:1;" width="10" x="615.4395" y="375.4297"/></g><rect fill="#FFFFFF" height="449.6641" style="stroke:#000000;stroke-width:1;" width="1014.4785" x="15" y="192.8281"/><rect fill="#FFFFFF" height="374.2656" style="stroke:none;stroke-width:1;" width="1014.4785" x="15" y="268.2266"/><g><title>Client Code</title><rect fill="#000000" fill-opacity="0.00000" height="592.1953" width="8" x="78.4106" y="67.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="82" x2="82" y1="67.2969" y2="659.4922"/></g><g><title>RuntimeManager</title><rect fill="#000000" fill-opacity="0.00000" height="592.1953" width="8" x="292.3452" y="67.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="296.1104" x2="296.1104" y1="67.2969" y2="659.4922"/></g><g><title>Service Class</title><rect fill="#000000" fill-opacity="0.00000" height="592.1953" width="8" x="476.3022" y="67.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="479.7905" x2="479.7905" y1="67.2969" y2="659.4922"/></g><g><title>FinalSingleton</title><rect fill="#000000" fill-opacity="0.00000" height="592.1953" width="8" x="616.4395" y="67.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="619.814" x2="619.814" y1="67.2969" y2="659.4922"/></g><g><title>Instance Cache</title><rect fill="#000000" fill-opacity="0.00000" height="592.1953" width="8" x="768.874" y="67.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="772.106" x2="772.106" y1="67.2969" y2="659.4922"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="94.8213" x="35" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.8213" x="42" y="55.9951">Client Code</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="94.8213" x="35" y="658.4922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.8213" x="42" y="678.4873">Client Code</text></g><g class="participant participant-head" data-participant="RM"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.4697" x="229.1104" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.4697" x="236.1104" y="55.9951">RuntimeManager</text></g><g class="participant participant-tail" data-participant="RM"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.4697" x="229.1104" y="658.4922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.4697" x="236.1104" y="678.4873">RuntimeManager</text></g><g class="participant participant-head" data-participant="Service"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="107.0234" x="426.7905" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93.0234" x="433.7905" y="55.9951">Service Class</text></g><g class="participant participant-tail" data-participant="Service"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="107.0234" x="426.7905" y="658.4922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93.0234" x="433.7905" y="678.4873">Service Class</text></g><g class="participant participant-head" data-participant="FS"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="113.251" x="563.814" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99.251" x="570.814" y="55.9951">FinalSingleton</text></g><g class="participant participant-tail" data-participant="FS"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="113.251" x="563.814" y="658.4922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99.251" x="570.814" y="678.4873">FinalSingleton</text></g><g class="participant participant-head" data-participant="Cache"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.5361" x="716.106" y="63.9951">Instance Cache</text><path d="M754.874,15 C754.874,5 772.874,5 772.874,5 C772.874,5 790.874,5 790.874,15 L790.874,41 C790.874,51 772.874,51 772.874,51 C772.874,51 754.874,51 754.874,41 L754.874,15" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M754.874,15 C754.874,25 772.874,25 772.874,25 C772.874,25 790.874,25 790.874,15" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Cache"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.5361" x="716.106" y="671.4873">Instance Cache</text><path d="M754.874,684.7891 C754.874,674.7891 772.874,674.7891 772.874,674.7891 C772.874,674.7891 790.874,674.7891 790.874,684.7891 L790.874,710.7891 C790.874,720.7891 772.874,720.7891 772.874,720.7891 C772.874,720.7891 754.874,720.7891 754.874,710.7891 L754.874,684.7891" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M754.874,684.7891 C754.874,694.7891 772.874,694.7891 772.874,694.7891 C772.874,694.7891 790.874,694.7891 790.874,684.7891" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g><title>RuntimeManager</title><rect fill="#FFFFFF" height="551.0625" style="stroke:#000000;stroke-width:1;" width="10" x="291.3452" y="98.4297"/></g><g><title>Service Class</title><rect fill="#FFFFFF" height="129.5313" style="stroke:#000000;stroke-width:1;" width="10" x="475.3022" y="346.2969"/></g><g><title>Service Class</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="475.3022" y="504.9609"/></g><g><title>FinalSingleton</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#000000;stroke-width:1;" width="10" x="615.4395" y="375.4297"/></g><g class="message" data-participant-1="Client" data-participant-2="RM"><polygon fill="#000000" points="279.3452,94.4297,289.3452,98.4297,279.3452,102.4297,283.3452,98.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="82.4106" x2="285.3452" y1="98.4297" y2="98.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189.9346" x="89.4106" y="93.3638">get(ServiceClass, arg1, arg2)</text></g><g class="message" data-participant-1="RM" data-participant-2="RM"><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="343.3452" y1="131.6289" y2="131.6289"/><line style="stroke:#000000;stroke-width:1;" x1="343.3452" x2="343.3452" y1="131.6289" y2="144.6289"/><line style="stroke:#000000;stroke-width:1;" x1="302.3452" x2="343.3452" y1="144.6289" y2="144.6289"/><polygon fill="#000000" points="312.3452,140.6289,302.3452,144.6289,312.3452,148.6289,308.3452,144.6289" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.957" x="308.3452" y="126.563">_get_key(ServiceClass)</text></g><path d="M479.957,111.4297 L479.957,151.4297 L630.957,151.4297 L630.957,121.4297 L620.957,111.4297 L479.957,111.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M620.957,111.4297 L620.957,121.4297 L630.957,121.4297 L620.957,111.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.6982" x="485.957" y="128.4966">Generate cache key</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.9419" x="485.957" y="143.6294">from class name</text><g class="message" data-participant-1="RM" data-participant-2="Cache"><polygon fill="#000000" points="760.874,173.8281,770.874,177.8281,760.874,181.8281,764.874,177.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="766.874" y1="177.8281" y2="177.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.46" x="308.3452" y="172.7622">check if exists</text></g><path d="M15,192.8281 L79.4429,192.8281 L79.4429,199.9609 L69.4429,209.9609 L15,209.9609 L15,192.8281" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="449.6641" style="stroke:#000000;stroke-width:1;" width="1014.4785" x="15" y="192.8281"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="30" y="205.895">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110.478" x="94.4429" y="205.0386">[Instance cached]</text><g class="message" data-participant-1="Cache" data-participant-2="RM"><polygon fill="#000000" points="312.3452,227.0938,302.3452,231.0938,312.3452,235.0938,308.3452,231.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="306.3452" x2="771.874" y1="231.0938" y2="231.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="55.0723" x="318.3452" y="226.0278">instance</text></g><g class="message" data-participant-1="RM" data-participant-2="Client"><polygon fill="#000000" points="93.4106,256.2266,83.4106,260.2266,93.4106,264.2266,89.4106,260.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="87.4106" x2="290.3452" y1="260.2266" y2="260.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.4678" x="99.4106" y="255.1606">return instance</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="15" x2="1029.4785" y1="269.2266" y2="269.2266"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.5352" x="20" y="279.437">[Not cached]</text><g class="message" data-participant-1="RM" data-participant-2="RM"><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="343.3452" y1="304.1641" y2="304.1641"/><line style="stroke:#000000;stroke-width:1;" x1="343.3452" x2="343.3452" y1="304.1641" y2="317.1641"/><line style="stroke:#000000;stroke-width:1;" x1="302.3452" x2="343.3452" y1="317.1641" y2="317.1641"/><polygon fill="#000000" points="312.3452,313.1641,302.3452,317.1641,312.3452,321.1641,308.3452,317.1641" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.9331" x="308.3452" y="299.0981">acquire lock</text></g><path d="M408.9331,291.5313 L408.9331,316.5313 L564.9331,316.5313 L564.9331,301.5313 L554.9331,291.5313 L408.9331,291.5313" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M554.9331,291.5313 L554.9331,301.5313 L564.9331,301.5313 L554.9331,291.5313" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.2368" x="414.9331" y="308.5981">Thread-safe creation</text><g class="message" data-participant-1="RM" data-participant-2="Service"><polygon fill="#000000" points="463.3022,342.2969,473.3022,346.2969,463.3022,350.2969,467.3022,346.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="469.3022" y1="346.2969" y2="346.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="26.8696" x="308.3452" y="341.231">new</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.0762" x="335.2148" y="341.231">(arg1, arg2)</text></g><g class="message" data-participant-1="Service" data-participant-2="FS"><polygon fill="#000000" points="603.4395,371.4297,613.4395,375.4297,603.4395,379.4297,607.4395,375.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="485.3022" x2="609.4395" y1="375.4297" y2="375.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="26.8696" x="492.3022" y="370.3638">new</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="10.1436" x="519.1719" y="370.3638">()</text></g><g class="message" data-participant-1="FS" data-participant-2="FS"><line style="stroke:#000000;stroke-width:1;" x1="625.4395" x2="667.4395" y1="404.5625" y2="404.5625"/><line style="stroke:#000000;stroke-width:1;" x1="667.4395" x2="667.4395" y1="404.5625" y2="417.5625"/><line style="stroke:#000000;stroke-width:1;" x1="626.4395" x2="667.4395" y1="417.5625" y2="417.5625"/><polygon fill="#000000" points="636.4395,413.5625,626.4395,417.5625,636.4395,421.5625,632.4395,417.5625" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.4346" x="632.4395" y="399.4966">check if direct call</text></g><path d="M772.4346,391.9297 L772.4346,416.9297 L1008.4346,416.9297 L1008.4346,401.9297 L998.4346,391.9297 L772.4346,391.9297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M998.4346,391.9297 L998.4346,401.9297 L1008.4346,401.9297 L998.4346,391.9297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.6045" x="778.4346" y="408.9966">Enforces RuntimeManager usage</text><g class="message" data-participant-1="FS" data-participant-2="Service"><polygon fill="#000000" points="496.3022,442.6953,486.3022,446.6953,496.3022,450.6953,492.3022,446.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="490.3022" x2="619.4395" y1="446.6953" y2="446.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.0742" x="502.3022" y="441.6294">new instance</text></g><g class="message" data-participant-1="Service" data-participant-2="RM"><polygon fill="#000000" points="312.3452,471.8281,302.3452,475.8281,312.3452,479.8281,308.3452,475.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="306.3452" x2="479.3022" y1="475.8281" y2="475.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="55.0723" x="318.3452" y="470.7622">instance</text></g><g class="message" data-participant-1="RM" data-participant-2="Service"><polygon fill="#000000" points="463.3022,500.9609,473.3022,504.9609,463.3022,508.9609,467.3022,504.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="469.3022" y1="504.9609" y2="504.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.4038" x="308.3452" y="499.895">async_init() if defined</text></g><g class="message" data-participant-1="Service" data-participant-2="RM"><polygon fill="#000000" points="312.3452,530.0938,302.3452,534.0938,312.3452,538.0938,308.3452,534.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="306.3452" x2="479.3022" y1="534.0938" y2="534.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.9736" x="318.3452" y="529.0278">completed</text></g><g class="message" data-participant-1="RM" data-participant-2="Cache"><polygon fill="#000000" points="760.874,559.2266,770.874,563.2266,760.874,567.2266,764.874,563.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="766.874" y1="563.2266" y2="563.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.3711" x="308.3452" y="558.1606">store instance</text></g><g class="message" data-participant-1="RM" data-participant-2="RM"><line style="stroke:#000000;stroke-width:1;" x1="301.3452" x2="343.3452" y1="592.3594" y2="592.3594"/><line style="stroke:#000000;stroke-width:1;" x1="343.3452" x2="343.3452" y1="592.3594" y2="605.3594"/><line style="stroke:#000000;stroke-width:1;" x1="302.3452" x2="343.3452" y1="605.3594" y2="605.3594"/><polygon fill="#000000" points="312.3452,601.3594,302.3452,605.3594,312.3452,609.3594,308.3452,605.3594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.0635" x="308.3452" y="587.2935">release lock</text></g><g class="message" data-participant-1="RM" data-participant-2="Client"><polygon fill="#000000" points="93.4106,630.4922,83.4106,634.4922,93.4106,638.4922,89.4106,634.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="87.4106" x2="290.3452" y1="634.4922" y2="634.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.4678" x="99.4106" y="629.4263">return instance</text></g><!--SRC=[XLEnRkCm3Dtr5Moc16Y6TipGfRWKD-I6kEC11YlJZX2PIYMbT_txerJPiTlYua6sfCV7nqVw9Xwe9pXPDApK2NqqsfoG8omUhI5vFxg65e01FlPppFxCqVIqGyQEV8RjTtD8HVxDQ99m324ZoiaSjZMCjZBSMOgECsvRgGOZlc0WMFpa494J3-f34PI-b2ewrm-IUWCTnML9a3FU0lhkBg_tAuKwcZUCb5Ig_Mu8gYMgFjBxB7Abs0dIc-uGD_14J3v5wfGL1FoRM-zwq0aBZ3qDZ5dN1cJHHp0jq5yJOb1e8unLP9P6WJmP3kiYnHH4lafyYJ1Nk05FyUpv0Y4hplnoSSfsAGhrwzbu0klqCLzDota-UC9c7R0LBV8PZUCCcf0KCyIUckbFNI-dJYROwERGqNGuz5i8jjKbzbE4z3RjjzM06zrgHBDE9LdxHVKFRftN94Cscpiu1tcDX5FfadnkQKEVDOo2l-l013ujyZkNCBophWsRk5pbGgWrNBhoVwTAOktwaqn_2RcUkSnPY4ww_6LkFZWzMKh_ppW4rqQA6wKcgUK_-GS0]--></g></svg>