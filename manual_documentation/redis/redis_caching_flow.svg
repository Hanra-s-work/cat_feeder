<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="599px" preserveAspectRatio="none" style="width:1031px;height:599px;background:#FFFFFF;" version="1.1" viewBox="0 0 1031 599" width="1031px" zoomAndPan="magnify"><defs/><g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="486.9297" style="stroke:#000000;stroke-width:1;" width="10" x="423.9624" y="67.4297"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="168.4688" style="stroke:#000000;stroke-width:1;" width="10" x="719.0859" y="146.8281"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="719.0859" y="481.0938"/></g><g><title>Data Fetcher</title><rect fill="#FFFFFF" height="47.2656" style="stroke:#000000;stroke-width:1;" width="10" x="852.958" y="362.5625"/></g><rect fill="#FFFFFF" height="385.5313" style="stroke:#000000;stroke-width:1;" width="1009.1738" x="15" y="161.8281"/><rect fill="#FFFFFF" height="268" style="stroke:none;stroke-width:1;" width="1009.1738" x="15" y="279.3594"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="528.0625" width="8" x="58.2651" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="62" x2="62" y1="36.2969" y2="564.3594"/></g><g><title>RedisCaching</title><rect fill="#000000" fill-opacity="0.00000" height="528.0625" width="8" x="424.9624" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="428.4697" x2="428.4697" y1="36.2969" y2="564.3594"/></g><g><title>Redis Server</title><rect fill="#000000" fill-opacity="0.00000" height="528.0625" width="8" x="720.0859" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="723.7002" x2="723.7002" y1="36.2969" y2="564.3594"/></g><g><title>Data Fetcher</title><rect fill="#000000" fill-opacity="0.00000" height="528.0625" width="8" x="853.958" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="857.4717" x2="857.4717" y1="36.2969" y2="564.3594"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="35" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="42" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="35" y="563.3594"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="42" y="583.3545">Client</text></g><g class="participant participant-head" data-participant="Cache"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.9854" x="374.4697" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9854" x="381.4697" y="24.9951">RedisCaching</text></g><g class="participant participant-tail" data-participant="Cache"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.9854" x="374.4697" y="563.3594"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9854" x="381.4697" y="583.3545">RedisCaching</text></g><g class="participant participant-head" data-participant="Redis"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.7715" x="672.7002" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.7715" x="679.7002" y="24.9951">Redis Server</text></g><g class="participant participant-tail" data-participant="Redis"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.7715" x="672.7002" y="563.3594"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.7715" x="679.7002" y="583.3545">Redis Server</text></g><g class="participant participant-head" data-participant="Fetcher"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.9727" x="805.4717" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.9727" x="812.4717" y="24.9951">Data Fetcher</text></g><g class="participant participant-tail" data-participant="Fetcher"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.9727" x="805.4717" y="563.3594"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.9727" x="812.4717" y="583.3545">Data Fetcher</text></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="486.9297" style="stroke:#000000;stroke-width:1;" width="10" x="423.9624" y="67.4297"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="168.4688" style="stroke:#000000;stroke-width:1;" width="10" x="719.0859" y="146.8281"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="719.0859" y="481.0938"/></g><g><title>Data Fetcher</title><rect fill="#FFFFFF" height="47.2656" style="stroke:#000000;stroke-width:1;" width="10" x="852.958" y="362.5625"/></g><g class="message" data-participant-1="Client" data-participant-2="Cache"><polygon fill="#000000" points="411.9624,63.4297,421.9624,67.4297,411.9624,71.4297,415.9624,67.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="62.2651" x2="417.9624" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="342.6973" x="69.2651" y="62.3638">get_data_from_table(table, columns, where, fetcher)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Cache"><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="475.9624" y1="100.6289" y2="100.6289"/><line style="stroke:#000000;stroke-width:1;" x1="475.9624" x2="475.9624" y1="100.6289" y2="113.6289"/><line style="stroke:#000000;stroke-width:1;" x1="434.9624" x2="475.9624" y1="113.6289" y2="113.6289"/><polygon fill="#000000" points="444.9624,109.6289,434.9624,113.6289,444.9624,117.6289,440.9624,113.6289" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="261.1235" x="440.9624" y="95.563">build_cache_key(table, columns, where)</text></g><path d="M723.1235,80.4297 L723.1235,120.4297 L981.1235,120.4297 L981.1235,90.4297 L971.1235,80.4297 L723.1235,80.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M971.1235,80.4297 L971.1235,90.4297 L981.1235,90.4297 L971.1235,80.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.3306" x="729.1235" y="97.4966">Key format:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="237.8721" x="729.1235" y="112.6294">sql:{table}:{hash(columns, where)}</text><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="707.0859,142.8281,717.0859,146.8281,707.0859,150.8281,711.0859,146.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="713.0859" y1="146.8281" y2="146.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.5791" x="440.9624" y="141.7622">GET cache_key</text></g><path d="M15,161.8281 L79.4429,161.8281 L79.4429,168.9609 L69.4429,178.9609 L15,178.9609 L15,161.8281" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="385.5313" style="stroke:#000000;stroke-width:1;" width="1009.1738" x="15" y="161.8281"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="30" y="174.895">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71.9941" x="94.4429" y="174.0386">[Cache HIT]</text><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="444.9624,196.0938,434.9624,200.0938,444.9624,204.0938,440.9624,200.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="438.9624" x2="718.0859" y1="200.0938" y2="200.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.0781" x="450.9624" y="195.0278">cached_value (JSON)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Cache"><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="475.9624" y1="229.2266" y2="229.2266"/><line style="stroke:#000000;stroke-width:1;" x1="475.9624" x2="475.9624" y1="229.2266" y2="242.2266"/><line style="stroke:#000000;stroke-width:1;" x1="434.9624" x2="475.9624" y1="242.2266" y2="242.2266"/><polygon fill="#000000" points="444.9624,238.2266,434.9624,242.2266,444.9624,246.2266,440.9624,242.2266" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.1694" x="440.9624" y="224.1606">json.loads(cached_value)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Client"><polygon fill="#000000" points="73.2651,267.3594,63.2651,271.3594,73.2651,275.3594,69.2651,271.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="67.2651" x2="422.9624" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.6772" x="79.2651" y="266.2935">return data</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="15" x2="1024.1738" y1="280.3594" y2="280.3594"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82.0757" x="20" y="290.5698">[Cache MISS]</text><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="444.9624,311.2969,434.9624,315.2969,444.9624,319.2969,440.9624,315.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="438.9624" x2="723.0859" y1="315.2969" y2="315.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33.9155" x="450.9624" y="310.231">None</text></g><g class="message" data-participant-1="Cache" data-participant-2="Fetcher"><polygon fill="#000000" points="840.958,358.5625,850.958,362.5625,840.958,366.5625,844.958,362.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="846.958" y1="362.5625" y2="362.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="56.5449" x="440.9624" y="357.4966">fetcher()</text></g><path d="M867,328.2969 L867,383.2969 L1018,383.2969 L1018,338.2969 L1008,328.2969 L867,328.2969" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1008,328.2969 L1008,338.2969 L1018,338.2969 L1008,328.2969" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.2158" x="873" y="345.3638">Fetcher is a callable</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.2729" x="873" y="360.4966">provided by client</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.3096" x="873" y="375.6294">(e.g., SQL query)</text><g class="message" data-participant-1="Fetcher" data-participant-2="Cache"><polygon fill="#000000" points="444.9624,405.8281,434.9624,409.8281,444.9624,413.8281,440.9624,409.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="438.9624" x2="856.958" y1="409.8281" y2="409.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.7134" x="450.9624" y="404.7622">fresh_data</text></g><g class="message" data-participant-1="Cache" data-participant-2="Cache"><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="475.9624" y1="438.9609" y2="438.9609"/><line style="stroke:#000000;stroke-width:1;" x1="475.9624" x2="475.9624" y1="438.9609" y2="451.9609"/><line style="stroke:#000000;stroke-width:1;" x1="434.9624" x2="475.9624" y1="451.9609" y2="451.9609"/><polygon fill="#000000" points="444.9624,447.9609,434.9624,451.9609,444.9624,455.9609,440.9624,451.9609" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.7466" x="440.9624" y="433.895">json.dumps(fresh_data)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="707.0859,477.0938,717.0859,481.0938,707.0859,485.0938,711.0859,481.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="433.9624" x2="713.0859" y1="481.0938" y2="481.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.5889" x="440.9624" y="476.0278">SET cache_key value EX ttl</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="444.9624,506.2266,434.9624,510.2266,444.9624,514.2266,440.9624,510.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="438.9624" x2="723.0859" y1="510.2266" y2="510.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="450.9624" y="505.1606">OK</text></g><g class="message" data-participant-1="Cache" data-participant-2="Client"><polygon fill="#000000" points="73.2651,535.3594,63.2651,539.3594,73.2651,543.3594,69.2651,539.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="67.2651" x2="422.9624" y1="539.3594" y2="539.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.1089" x="79.2651" y="534.2935">return fresh_data</text></g><!--SRC=[ZLFBRi8m4BpxAxOz1GduW1nweRIbBzI6Gs-HYHVYrd5Isw52Y7-lOuVW09MQ0zZPsV7iZ7DbSYmGAa6v9AIYol2CLrGQk9u8Zj9S0zNWb_toEpAk9pJBkLnxa5tZ1Gmag3Qe7CQzw6DkgQ5mXyOsUqox9iIV2gCRJnt36atAB3nTgR983LqAZDpl4B9Ir8NKG_YnhNQ_yYG3GZF3DzHWAu-ulu1pMNF1qgpPf5-ulSmt8BAq58glSqF0Fa-uXLMf2cfYjzVV8jwvrdsyowdEenE2FK79e64993WtOhYVBg0JS1JilI9K6AyL7cOBTvXtTNISmJMpT4D5ZH0z9lFNWGEUplgfIpaM9MKw2bjwu0RjV8z1eQcLXCPnXo0eTEiZlCoIvBAOrrAYgp0y6SLnz7IrKSU7k28lfUixN8NcvKa2pTEMmGgWrWGXcW2wQgNA3MV8OBc5p5_WGod2yNeyXEJj6RvhL5j_R9TGo1rCjbAeyxIp8vWlrFctywmkAXqTMGONyEsLIC8h0JxOwGSO8_e67Oqzos7-zByKpWCFvhIM419G-8_e5m00]--></g></svg>