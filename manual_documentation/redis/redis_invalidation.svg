<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="802px" preserveAspectRatio="none" style="width:651px;height:802px;background:#FFFFFF;" version="1.1" viewBox="0 0 651 802" width="651px" zoomAndPan="magnify"><defs/><g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="205.9297" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="110.5625"/></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="194.9297" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="388.7578"/></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="658.9531"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="147.6641" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="139.6953"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="525.4219"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="691.0859"/></g><rect fill="#FFFFFF" height="104.5313" style="stroke:#000000;stroke-width:1;" width="359.3794" x="199.8657" y="154.6953"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="731.0547" width="8" x="43.2651" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="47" x2="47" y1="36.2969" y2="767.3516"/></g><g><title>RedisCaching</title><rect fill="#000000" fill-opacity="0.00000" height="731.0547" width="8" x="270.3584" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="273.8657" x2="273.8657" y1="36.2969" y2="767.3516"/></g><g><title>Redis Server</title><rect fill="#000000" fill-opacity="0.00000" height="731.0547" width="8" x="483.8594" y="36.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="487.4736" x2="487.4736" y1="36.2969" y2="767.3516"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="20" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="27" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="54.5303" x="20" y="766.3516"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="27" y="786.3467">Client</text></g><g class="participant participant-head" data-participant="Cache"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.9854" x="219.8657" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9854" x="226.8657" y="24.9951">RedisCaching</text></g><g class="participant participant-tail" data-participant="Cache"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.9854" x="219.8657" y="766.3516"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9854" x="226.8657" y="786.3467">RedisCaching</text></g><g class="participant participant-head" data-participant="Redis"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.7715" x="436.4736" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.7715" x="443.4736" y="24.9951">Redis Server</text></g><g class="participant participant-tail" data-participant="Redis"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.7715" x="436.4736" y="766.3516"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.7715" x="443.4736" y="786.3467">Redis Server</text></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="205.9297" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="110.5625"/></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="194.9297" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="388.7578"/></g><g><title>RedisCaching</title><rect fill="#FFFFFF" height="90.3984" style="stroke:#000000;stroke-width:1;" width="10" x="269.3584" y="658.9531"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="147.6641" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="139.6953"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="525.4219"/></g><g><title>Redis Server</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="482.8594" y="691.0859"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="639.2026" x="5" y="66.8633"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="66.8633" y2="66.8633"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="69.8633" y2="69.8633"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="176.7476" x="236.2275" y="56.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158.2217" x="242.2275" y="72.3638">Targeted Invalidation</text><g class="message" data-participant-1="Client" data-participant-2="Cache"><polygon fill="#000000" points="257.3584,106.5625,267.3584,110.5625,257.3584,114.5625,261.3584,110.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="47.2651" x2="263.3584" y1="110.5625" y2="110.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.1748" x="54.2651" y="105.4966">invalidate("sql:users:*")</text></g><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="470.8594,135.6953,480.8594,139.6953,470.8594,143.6953,474.8594,139.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="476.8594" y1="139.6953" y2="139.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.501" x="286.3584" y="134.6294">SCAN 0 MATCH "sql:users:*"</text></g><path d="M199.8657,154.6953 L276.4897,154.6953 L276.4897,161.8281 L266.4897,171.8281 L199.8657,171.8281 L199.8657,154.6953" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1;" width="359.3794" x="199.8657" y="154.6953"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="214.8657" y="167.7622">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148.4624" x="291.4897" y="166.9058">[for each matching key]</text><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="290.3584,188.9609,280.3584,192.9609,290.3584,196.9609,286.3584,192.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="284.3584" x2="481.8594" y1="192.9609" y2="192.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.8271" x="296.3584" y="187.895">keys batch</text></g><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="470.8594,218.0938,480.8594,222.0938,470.8594,226.0938,474.8594,222.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="476.8594" y1="222.0938" y2="222.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.8755" x="286.3584" y="217.0278">DELETE key1, key2, ...</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="290.3584,247.2266,280.3584,251.2266,290.3584,255.2266,286.3584,251.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="284.3584" x2="481.8594" y1="251.2266" y2="251.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="90.0161" x="296.3584" y="246.1606">deleted count</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="290.3584,283.3594,280.3584,287.3594,290.3584,291.3594,286.3584,287.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="284.3584" x2="486.8594" y1="287.3594" y2="287.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.98" x="296.3584" y="282.2935">scan complete</text></g><g class="message" data-participant-1="Cache" data-participant-2="Client"><polygon fill="#000000" points="58.2651,312.4922,48.2651,316.4922,58.2651,320.4922,54.2651,316.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="52.2651" x2="273.3584" y1="316.4922" y2="316.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.6099" x="64.2651" y="311.4263">total_deleted_count</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="639.2026" x="5" y="345.0586"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="345.0586" y2="345.0586"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="348.0586" y2="348.0586"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="192.769" x="228.2168" y="334.4922"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174.2432" x="234.2168" y="350.5591">Table-Wide Invalidation</text><g class="message" data-participant-1="Client" data-participant-2="Cache"><polygon fill="#000000" points="257.3584,384.7578,267.3584,388.7578,257.3584,392.7578,261.3584,388.7578" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="47.2651" x2="263.3584" y1="388.7578" y2="388.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.0933" x="54.2651" y="383.6919">update_data_in_table(table, ...)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Cache"><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="321.3584" y1="417.8906" y2="417.8906"/><line style="stroke:#000000;stroke-width:1;" x1="321.3584" x2="321.3584" y1="417.8906" y2="430.8906"/><line style="stroke:#000000;stroke-width:1;" x1="280.3584" x2="321.3584" y1="430.8906" y2="430.8906"/><polygon fill="#000000" points="290.3584,426.8906,280.3584,430.8906,290.3584,434.8906,286.3584,430.8906" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.4985" x="286.3584" y="412.8247">perform write operation</text></g><g class="message" data-participant-1="Cache" data-participant-2="Cache"><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="321.3584" y1="471.6563" y2="471.6563"/><line style="stroke:#000000;stroke-width:1;" x1="321.3584" x2="321.3584" y1="471.6563" y2="484.6563"/><line style="stroke:#000000;stroke-width:1;" x1="280.3584" x2="321.3584" y1="484.6563" y2="484.6563"/><polygon fill="#000000" points="290.3584,480.6563,280.3584,484.6563,290.3584,488.6563,286.3584,484.6563" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.0908" x="286.3584" y="466.5903">invalidate(f"sql:{table}:*")</text></g><path d="M482.0908,443.8906 L482.0908,498.8906 L628.0908,498.8906 L628.0908,453.8906 L618.0908,443.8906 L482.0908,443.8906" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M618.0908,443.8906 L618.0908,453.8906 L628.0908,453.8906 L618.0908,443.8906" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.7534" x="488.0908" y="460.9575">Automatically clear</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.4219" x="488.0908" y="476.0903">all cached queries</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.7861" x="488.0908" y="491.2231">for this table</text><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="470.8594,521.4219,480.8594,525.4219,470.8594,529.4219,474.8594,525.4219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="476.8594" y1="525.4219" y2="525.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.9395" x="286.3584" y="520.356">SCAN + DELETE</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="290.3584,550.5547,280.3584,554.5547,290.3584,558.5547,286.3584,554.5547" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="284.3584" x2="486.8594" y1="554.5547" y2="554.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="83.332" x="296.3584" y="549.4888">keys deleted</text></g><g class="message" data-participant-1="Cache" data-participant-2="Client"><polygon fill="#000000" points="58.2651,579.6875,48.2651,583.6875,58.2651,587.6875,54.2651,583.6875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="52.2651" x2="273.3584" y1="583.6875" y2="583.6875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.248" x="64.2651" y="578.6216">write_result</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="639.2026" x="5" y="612.2539"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="612.2539" y2="612.2539"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="644.2026" y1="615.2539" y2="615.2539"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="163.1128" x="243.0449" y="601.6875"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144.5869" x="249.0449" y="617.7544">Manual Cache Clear</text><g class="message" data-participant-1="Client" data-participant-2="Cache"><polygon fill="#000000" points="257.3584,654.9531,267.3584,658.9531,257.3584,662.9531,261.3584,658.9531" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="47.2651" x2="263.3584" y1="658.9531" y2="658.9531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.9253" x="54.2651" y="653.8872">client.flushdb()</text></g><path d="M284,639.8203 L284,664.8203 L522,664.8203 L522,649.8203 L512,639.8203 L284,639.8203" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M512,639.8203 L512,649.8203 L522,649.8203 L512,639.8203" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217.2104" x="290" y="656.8872">Nuclear option - clears ALL cache</text><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#000000" points="470.8594,687.0859,480.8594,691.0859,470.8594,695.0859,474.8594,691.0859" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="279.3584" x2="476.8594" y1="691.0859" y2="691.0859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="61.1914" x="286.3584" y="686.02">FLUSHDB</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#000000" points="290.3584,716.2188,280.3584,720.2188,290.3584,724.2188,286.3584,720.2188" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="284.3584" x2="486.8594" y1="720.2188" y2="720.2188"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="296.3584" y="715.1528">OK</text></g><g class="message" data-participant-1="Cache" data-participant-2="Client"><polygon fill="#000000" points="58.2651,745.3516,48.2651,749.3516,58.2651,753.3516,54.2651,749.3516" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="52.2651" x2="273.3584" y1="749.3516" y2="749.3516"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="90.9492" x="64.2651" y="744.2856">cache cleared</text></g><!--SRC=[ZL9TZzCm47pthrZwLE1Q0O-HYbHoHOVe7H8juZ5oxMrZuTevVnIT4FyTUntKQzE3ouEJh6Tdl3D-4LhS8tIQAyDOnrrGGdNS11ZLMg498-0UokVfzbUKojTSjChi2YXzumKChD0Tq1662epDPh3cReS19Nmo1wwLv45P0xCPOqKC9kyBOmNgBmB78t-lg-ZH-UhLw2NZ8gX3glVQZ5wvatGgMDNpEtW3j_DrVGCdlSVM_aZQsWwsrW4c3jZpG8F13tnWa9uooUHugBJXOPDXj7-kVBrOBjQBZ7fxbTTtLp2TJYzJITJaXB0ncOn6CZR0UC5D0kox36KIpu_Vw-S6ig-2O0FNJS_T5Ev7VRrZbCH6u-IxalYCB6ANSsZImXjbcf1xnxJIWF-8f2Veq2MNz_3JgGIowPVKXi17gMyfkbyayvk2DpOrExLh0rawZy6co9JWMZ-0qCWTrTClY4mduJwYK-Yfd6CERJAO6BFZa0cVk3-l-p3FhypbAz4R_go8o8F6eO_wYMnkkObSzxUhpdDTZaLGORhLqRToCnx4SFIhWhj81YNlAUP9ySl3VBaiPWri-BZyjhgv_l1V0xvy7euzd9eqYkYfJ-MeVm00]--></g></svg>